<!DOCTYPE html>
<html lang="en">

<body>
   <% {
       MprTime elapsed = (mprGetTime() - MPR->start) / 1000;
       mprGC(MPR_GC_COMPLETE);
       render("%s", httpStatsReport(0));
       render("Uptime             %0d days, %02d:%02d:%02d",
           (int) (elapsed / 86400), (int) (elapsed / 3600 % 24), (int) (elapsed / 60 % 60), (int) (elapsed % 60));

        {
            Http *http;
            HttpNet *net;
            HttpConn *conn;
            MprWaitHandler *handler;
            cchar *uri;
            int i, next;
            http = MPR->httpService;
            mprLock(http->networks->mutex);
            render("\n\n");
            for (i = 0; (net = mprGetNextItem(http->networks, &i)) != 0;) {
                for (next = 0; (conn = mprGetNextItem(net->connections, &next)) != 0;) {
                    uri = conn->rx ? conn->rx->uri : "none";
                    handler = conn->sock ? conn->sock->handler : 0;
                    render("Conn state %d, lifespan %Ld/%Ld, timeouts %d/%d, error %d/%d, URI: %s, eof %d\n",
                        conn->state,
                        (int64) (http->now - conn->lastActivity) / 1000,
                        (int64) (http->now - conn->started) / 1000,
                        (int) conn->limits->inactivityTimeout / 1000,
                        (int) conn->limits->requestTimeout / 1000,
                        conn->error, conn->net->error,
                        uri, conn->rx->eof);
                }
            }
            mprUnlock(http->networks->mutex);
        }

   } %></pre>
</body>
</html>
