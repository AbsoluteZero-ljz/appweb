<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Embedthis Appweb Security</title>

<!-- BeginDsi "dsi/meta.html" -->
	<meta name="keywords" content="embedded web server, web server software, 
		embedded HTTP, application web server, embedded server,
		small web server, HTTP server, library web server, library HTTP,
		HTTP library" />
	<meta name="description" content="Embedthis Sofware provides 
		open source embedded web servers for devices and applications." />
	<meta name="robots" content="index,follow" />
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/js.html" -->
	<script language="JavaScript" type="text/javascript">
		document._ROOT_="../../../../";
	</script>
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/style.html" -->
	<link rel="stylesheet" type="text/css" href="../../../../css/doc.css">
<!-- EndDsi -->

<style type="text/css">
/*<![CDATA[*/
 table.c4 {text-align: left; width: 100%;}
 td.c3 {vertical-align: top;}
 span.c2 {font-weight: bold;}
 span.c1 {color: rgb(248, 248, 248); font-weight: bold;}
/*]]>*/
</style>
</head>

<body topmargin="0" leftmargin="0" marginheight="0" marginwidth="0">
  

<!-- BeginDsi "dsi/navTop.html" -->
	<div class="background">
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td>
					<a name="top"></a>
					<img src="../../../../images/backLeft.png" width="400" 
						height="93" border="0" ismap usemap="#home" /><br />
					<map name="home">
						<area coords="0,0,93,93" 
						href="http://www.mbedthis.com/index.html" />
					</map>
				</td>
				<td width="100%">
					<img src="../../../../images/backMiddle.png" width="100%" 
						height="93" border="0" /><br />
				</td>
				<td>
					<img src="../../../../images/backRight.png" width="354" 
						height="93" border="0" /><br />
				</td>
			</tr>
		</table>
	</div>

	<div class="navTop"> 
		<table cellpadding="0" cellspacing="0" border="0" align="top">
			<tr>
				<td valign="bottom"> 
					<a href="http://www.mbedthis.com/" class="navTop"
					>Embedthis Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../../product/index.html" class="navTop"
					>Documentation Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../../guide/appweb/users/admin/overview.html" class="navTop"
					>Administration</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../../api/gen/appweb/overview.html" class="navTop"
					>Programmers Reference</a>
				</td>
				<td valign="bottom"> 
<!--
					<form class="smallText" action="../../../../search.php" 
						method="post" name="searchForm" id="searchForm">
					</form>
					&nbsp; 
					<input class="smallText" type="text" name="search" 
						align="right" id="searchInput" size="15" maxlength="50"
						value="Sorry, No Searching" />
-->
				</td>
			</tr>
		</table>
	</div>

<!-- EndDsi -->

  <div class="navHistory">
    

<!-- BeginDsi "dsi/navHistory.html" -->
	<a href="../../../../product/index.html">Documentation Home</a> &gt; 
<!-- EndDsi -->

     <a href="overview.html">Administration</a> &gt; <span class=
    "c1">Security</span>
  </div>

  <table class="contentTable" border="0" height="100%">
    <tbody>
      <tr>
        <td class="content">
          <div class="guideHeader">
            <h1>

<!-- BeginDsi "dsi/backArrow.html" -->
			<a href="../../../../product/index.html"><img width="19" height="14" 
				class="nav" src="../../../../images/leftArrow.gif" /></a>
<!-- EndDsi -->

             Security</h1>
          </div>

          <div class="guideSection">
            Securing applications that are accessible to the Internet is not
            a trivial task. This page outlines some of the issues and offers
            tips to help you secure your application using the Embedthis
            Appweb product.<br />

            <h2><a name="updates" id="updates"></a> <a href=
            "#top"><img class="nav" src="../../../../images/upArrow.gif"
            height="16" width="16" /></a> Updates</h2>Even the best
            application or HTTP server can experience some security
            vulnerabilities that are discovered after being deployed in the
            field. It is highly recommended that you stay up to date with the
            latest version of Appweb.<br />
            <br />
            Embedthis offers a Security Enhancement Service as part of the
            commercial license that will proactively notify you of any
            security flaws and will expedite fixes or workarounds to minimize
            the vulnerability.<br />

            <h2><a name="account" id="account"></a> <a href=
            "#top"><img class="nav" src="../../../../images/upArrow.gif"
            height="16" width="16" /></a> Appweb User Account</h2>It is
            important that you run Appweb with the lowest system privilege
            that will get the job done. If any application is compromised,
            including Appweb, then the system will be safest if the
            compromised application has as few privileges as possible.<br />
            <br />
            On Linux, Appweb initially runs as <span class="c2">root</span>
            or <span class="c2">administrator</span> and then changes to the
            user account defined in the Appweb configuration file. As
            installed, Appweb will be configured to run in the <span class=
            "c2">nobody</span> account on Linux. You may modify the user and
            group account for Appweb by changing the <a href=
            "../configuration.html">configuration file</a>.<br />

            <p>On Windows when running as a system service, Appweb will run
            using the LocalSystem account. This account has no privileges to
            access the network using network drives, named pipes, RPC or
            DCOM. However, it has considerable privileges locally. It is
            suggested that you create a dedicated account for Appweb to
            minimize the priviliges available should Appweb be
            compromised.</p>

            <p>When creating an account for Appweb, ensure you do the
            following:<br /></p>

            <ul>
              <li>Using the Group Policy manager, grant the account the
              privilege of "Act as part of the operating system" and "Log on
              as a service".</li>

              <li>Ensure the account is a member of the "Users" group.</li>

              <li>Give the account read and execute rights to all HTML
              documents</li>

              <li>Give the account read, write, execute and delete rights to
              the logs directory</li>

              <li>Give the account read and execute rights to the appweb.exe
              and the DLLs in the libs directory.<br /></li>
            </ul>

            <h2><a name="directoryPermissions" id="directoryPermissions"></a>
            <a href="#top"><img class="nav" src=
            "../../../../images/upArrow.gif" height="16" width="16" /></a>
            Directory and File Permissions</h2>

            <p>When Appweb is installed, it is configured for maximum
            security. This section explains the policy used, incase you need
            to move or modify files and directories.</p>

            <p>To enhance security, you need to consider the directory and
            file permissions for three classes of content:</p>

            <ul>
              <li>Pages served by the HTTP server</li>

              <li>Scripts run by the HTTP server</li>

              <li>Configuration and log files used by the HTTP server.</li>
            </ul>Pages served by the Appweb server should be owned by
            <span class="c2">root</span> or <span class=
            "c2">administrator</span> and should be only readable by the
            Appweb user account. Directories containing served pages should
            be readable and executable only.<br />
            <br />
            Scripts run by the Appweb server should always be outside the
            directory containing served pages. After all, you don't want
            prying eyes viewing your scripts! Scripts should be owned by
            <span class="c2">root</span> or <span class=
            "c2">administrator</span> and should only be readable and
            executable by the Appweb user account.<br />
            <br />
            Configuration and log files used by the Appweb server should
            always be outside the directory containing served pages or
            scripts. The directory containing the log files must be writable
            by the Appweb user account.<br />

            <h3>ServerRoot Permissions</h3>The root directory for Appweb is
            called the ServerRoot directory and is defined by the ServerRoot
            directive in the configuration file.&#194;&nbsp;The ServerRoot
            directory and the logs and lib directory below it should be owned
            by <span class="c2">root</span> or <span class="c2">admin</span>,
            be in the group <span class="c2">root</span> or <span class=
            "c2">administrators</span>, and should only be writable by this
            user and group.<br />
            <br />
            For Linux, these commands will ensure the privileges are
            correctly setup:
            <pre>
cd        /etc/appweb<br />
chown root . lib logs<br />
chgrp     root . lib logs<br />
chmod     755 . lib logs
</pre><br />

            <h2><a name="dynamicContent" id="dynamicContent"></a> <a href=
            "#top"><img class="nav" src="../../../../images/upArrow.gif"
            height="16" width="16" /></a> Dynamic Content</h2>Appweb supports
            an in-process method of dynamic content creation called Embedded
            Server Pages (ESP). ESP will execute HTML pages with embedded
            code and scripts and process them before returning the result to
            the client. Properly configured, your scripts will not be
            readable by users and they will only see the generated
            content.<br />

            <h3>Embedded Server Pages</h3>To keep server-side ESP scripts
            private, you must have the ESP handler configured to process the
            required script extensions or URL prefixes. If a script extension
            is not configured, the static page handler may process the page
            and return the raw script back to the user. As installed, Appweb
            defines the ".esp" and ".asp" extensions for ESP pages.<br />

            <h3>Embedded Gateway Interface</h3>EGI forms are secure from
            file-based permission flaws because they run in-process and
            access no files.<br />
            <br />

            <h2><a name="ssl" id="ssl"></a> <a href="#top"><img class="nav"
            src="../../../../images/upArrow.gif" height="16" width=
            "16" /></a> SSL Servers</h2>If you configure a SSL virtual
            server, remember to define a separate DocumentRoot if you want to
            only serve private content to SSL users. Otherwise those pages
            will also be visible via the default server.<br />
            <br />

            <h2><a name="authentication" id="authentication"></a> <a href=
            "#top"><img class="nav" src="../../../../images/upArrow.gif"
            height="16" width="16" /></a> Authentication</h2>It is highly
            recommended that you not use basic authentication and only use
            digest authentication. As implemented in Appweb, digest
            authentication provides many safeguards against known exploits
            including; man-in-the-middle attacks, client spoofing, and replay
            attacks.<br />
            <br />

            <h2><a name="sandBoxing" id="sandBoxing"></a> <a href=
            "#top"><img class="nav" src="../../../../images/upArrow.gif"
            height="16" width="16" /></a> Sandboxing</h2>Sandboxing is the
            term applied to running Appweb in a confined environment. When
            embedding a HTTP server in an application, the profile of user
            access is often well known. This profile includes the rate of
            accesses, the length of URLs and the size of pages returned to
            the user.<br />
            <br />
            Appweb has a set of configuration file directives that allow you
            to define a sandbox which specifies how Appweb must be used for a
            request to be serviced. By using well defined sandbox directives,
            you can help ensure that your application will not be compromised
            by malicious requests. By default, Appweb has a relaxed set of
            defaults that will permit a wide range of requests.<br />
            <br />
            The sandbox directives can specify:<br />
            <br />

            <table class="c4 contentTable" border="1" cellpadding="2"
            cellspacing="2">
              <tbody>
                <tr>
                  <td class="c3">LimitBufferedBody<br /></td>

                  <td class="c3">Maximum size of generated dynamic data</td>
                </tr>

                <tr>
                  <td class="c3">LimitRequestBody<br /></td>

                  <td class="c3">Maximum size of the incoming request
                  body<br /></td>
                </tr>

                <tr>
                  <td class="c3">LimitRequestFields<br /></td>

                  <td class="c3">Maximum number of headers in the
                  request<br /></td>
                </tr>

                <tr>
                  <td class="c3">LimitRequestFieldSize<br /></td>

                  <td class="c3">Maximum size of the request
                  header<br /></td>
                </tr>

                <tr>
                  <td class="c3">LimitUrl<br /></td>

                  <td class="c3">Maximum size of a URL<br /></td>
                </tr>

                <tr>
                  <td class="c3">SendBufferSize<br /></td>

                  <td class="c3">Size of the TCP/IP buffer to use for
                  requests<br /></td>
                </tr>

                <tr>
                  <td class="c3">StartThreads<br /></td>

                  <td class="c3">Number of threads to preallocate in the
                  thread pool<br /></td>
                </tr>

                <tr>
                  <td class="c3">ThreadLimit<br /></td>

                  <td class="c3">Maximum number of threads to allocate on
                  demand for the thread pool<br /></td>
                </tr>

                <tr>
                  <td class="c3">ThreadStackSize<br /></td>

                  <td class="c3">Size of the per-thread stack<br /></td>
                </tr>
              </tbody>
            </table>

            <h2><a name="logFiles" id="logFiles"></a> <a href=
            "#top"><img class="nav" src="../../../../images/upArrow.gif"
            height="16" width="16" /></a> Log Files</h2>Appweb will log
            satisfied requests to the access log (usually logs/access.log)
            and errors to the error log (usually logs/error.log). It is
            recommended that you regularly review these logs for suspicious
            activity.<br />
            <br />
            <br />
          </div>
        </td>

        <td class="contentSep"><br /></td>

        <td class="contentSideBar">
          <div class="linkSection">
            <h2>Quick Nav</h2><a href="#updates">Updates</a><a href=
            "#account"><br />
            Appweb User Account</a><br />
            <a href="#directoryPermissions">Directory Permissions</a><br />
            <a href="#dynamicContent">Dynamic Content<br /></a> <a href=
            "#ssl">Secure Sockets Layer<br /></a> <a href=
            "#authentication">Authentication</a><br />
            <a href="#sandBoxing">Sandboxing</a>

            <h2>See Also</h2><a href="starting.html">Starting and Stopping
            Appweb<br /></a> <a href="service.html">Running as a
            Service</a><br />
            <a href="logFiles.html">Log Files</a><br />
            <a href="../../../../product/install/overview.html">Installation
            Overview</a><br />
          </div>
        </td>
      </tr>
    </tbody>
  </table>

<!-- BeginDsi "dsi/terms.html" -->
<p class="terms"> 
	<a href="../../../../product/copyright.html"
		>&copy; Embedthis Software LLC, 2003-2009. All 
		rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
</p>
<!-- EndDsi -->

</body>
</html>
