<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Embedthis Appweb Public API</title>

<!-- BeginDsi "dsi/meta.html" -->
	<meta name="keywords" content="embedded web server, web server software, 
		embedded HTTP, application web server, embedded server,
		small web server, HTTP server, library web server, library HTTP,
		HTTP library" />
	<meta name="description" content="Embedthis Sofware provides 
		open source embedded web servers for devices and applications." />
	<meta name="robots" content="index,follow" />
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/js.html" -->
	<script language="JavaScript" type="text/javascript">
		document._ROOT_="../../../";
	</script>
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/style.html" -->
	<link rel="stylesheet" type="text/css" href="../../../css/doc.css">
<!-- EndDsi -->

</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0">
  

<!-- BeginDsi "dsi/navTop.html" -->
	<div class="background">
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td>
					<a name="top"></a>
					<img src="../../../images/backLeft.png" width="400" 
						height="93" border="0" ismap usemap="#home" /><br />
					<map name="home">
						<area coords="0,0,93,93" 
						href="http://www.mbedthis.com/index.html" />
					</map>
				</td>
				<td width="100%">
					<img src="../../../images/backMiddle.png" width="100%" 
						height="93" border="0" /><br />
				</td>
				<td>
					<img src="../../../images/backRight.png" width="354" 
						height="93" border="0" /><br />
				</td>
			</tr>
		</table>
	</div>

	<div class="navTop"> 
		<table cellpadding="0" cellspacing="0" border="0" align="top">
			<tr>
				<td valign="bottom"> 
					<a href="http://www.mbedthis.com/" class="navTop"
					>Embedthis Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../product/index.html" class="navTop"
					>Documentation Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../guide/appweb/users/admin/overview.html" class="navTop"
					>Administration</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../api/gen/appweb/overview.html" class="navTop"
					>Programmers Reference</a>
				</td>
				<td valign="bottom"> 
<!--
					<form class="smallText" action="../../../search.php" 
						method="post" name="searchForm" id="searchForm">
					</form>
					&nbsp; 
					<input class="smallText" type="text" name="search" 
						align="right" id="searchInput" size="15" maxlength="50"
						value="Sorry, No Searching" />
-->
				</td>
			</tr>
		</table>
	</div>

<!-- EndDsi -->

  <div class="navHistory">
    

<!-- BeginDsi "dsi/navHistory.html" -->
	<a href="../../../product/index.html">Documentation Home</a> &gt; 
<!-- EndDsi -->

     <a href="overview.html">Programmers Reference</a> &gt; <a href='files.html'>Files</a> &gt <b>embedded.cpp</b>
  </div>

  <table class="content" border="0" height="100%" width="100%">
    <tr>
      <td class="content">
</div>
<div class="contents">
<h1>mpr/embedded.cpp File Reference</h1>Miscellaneous routines safe for embedded programming.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#1ad8f5fe0e22baa78449dfe9421c07af">mprAddToArray</a> (<a class="el" href="structMprArray.html">MprArray</a> *array, void *item)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structMprArray.html">MprArray</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#145e473aba9c96b07c422e25207eb725">mprCreateArray</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#ec0b0707afaa239d594d0e6888a7cab9">mprDestroyArray</a> (<a class="el" href="structMprArray.html">MprArray</a> *array)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#72e1d52a5cfd879baa5e603321a0c323">mprFprintf</a> (int fd, char *fmt,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#c2256fbc4a2a35c5ec94a9bd835c4c37">mprPrintf</a> (char *fmt,...)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#9d3d268fb4b52dc6e9d2839db65b711d">mprRemoveFromArray</a> (<a class="el" href="structMprArray.html">MprArray</a> *array, int index)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="embedded_8cpp.html#3882a1640da85be04eb147a539ede14b">mprStaticPrintf</a> (char *fmt,...)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Miscellaneous routines safe for embedded programming. 
<p>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>This module provides safe replacements for the standard library string and formatting routines. It also provides some thread-safe replacements for functions that are only safe when single-threaded. </dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>Most routines in this file are not thread-safe. It is the callers responsibility to perform all thread synchronization. </dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="1ad8f5fe0e22baa78449dfe9421c07af"></a><!-- doxytag: member="embedded.cpp::mprAddToArray" ref="1ad8f5fe0e22baa78449dfe9421c07af" args="(MprArray *array, void *item)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprAddToArray           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMprArray.html">MprArray</a> *&nbsp;</td>
          <td class="paramname"> <em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>item</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Add an item to an array </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Add the specified item to the array. The array must have been previously created via mprCreateArray. The array will grow as required to store the item. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>Array pointer returned from mprCreateArray. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>item</em>&nbsp;</td><td>Pointer to item to store. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns a positive integer array index for the inserted item. If the item cannot be inserted due to a memory allocation failure, -1 is returned. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#9d054618c3410a8920e951a18e7fdd50">mprCreateArray</a>, <a class="el" href="mpr_8h.html#ec0b0707afaa239d594d0e6888a7cab9">mprDestroyArray</a>, <a class="el" href="mpr_8h.html#9d3d268fb4b52dc6e9d2839db65b711d">mprRemoveFromArray</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="145e473aba9c96b07c422e25207eb725"></a><!-- doxytag: member="embedded.cpp::mprCreateArray" ref="145e473aba9c96b07c422e25207eb725" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structMprArray.html">MprArray</a> * mprCreateArray           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Create an array </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Creates an empty array. MprArray's can store generic pointers and automatically grow as required when items are added to the array. Callers should invoke mprDestoryArray when finished with the array to release allocated storage. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns a pointer to the array. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#1ad8f5fe0e22baa78449dfe9421c07af">mprAddToArray</a>, <a class="el" href="mpr_8h.html#ec0b0707afaa239d594d0e6888a7cab9">mprDestroyArray</a>, <a class="el" href="mpr_8h.html#9d3d268fb4b52dc6e9d2839db65b711d">mprRemoveFromArray</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="ec0b0707afaa239d594d0e6888a7cab9"></a><!-- doxytag: member="embedded.cpp::mprDestroyArray" ref="ec0b0707afaa239d594d0e6888a7cab9" args="(MprArray *array)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mprDestroyArray           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMprArray.html">MprArray</a> *&nbsp;</td>
          <td class="paramname"> <em>array</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Destroy an array </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Destroys an array previously created via mprCreateArray. The array does not have to be empty prior to invoking this function. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns a pointer to the array. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#1ad8f5fe0e22baa78449dfe9421c07af">mprAddToArray</a>, <a class="el" href="mpr_8h.html#9d054618c3410a8920e951a18e7fdd50">mprCreateArray</a>, <a class="el" href="mpr_8h.html#9d3d268fb4b52dc6e9d2839db65b711d">mprRemoveFromArray</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="72e1d52a5cfd879baa5e603321a0c323"></a><!-- doxytag: member="embedded.cpp::mprFprintf" ref="72e1d52a5cfd879baa5e603321a0c323" args="(int fd, char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprFprintf           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Print a formatted message to a file descriptor </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>This is a replacement for fprintf as part of the safe string MPR library. It minimizes memory use and uses a file descriptor instead </dd></dl>

</div>
</div><p>
<a class="anchor" name="c2256fbc4a2a35c5ec94a9bd835c4c37"></a><!-- doxytag: member="embedded.cpp::mprPrintf" ref="c2256fbc4a2a35c5ec94a9bd835c4c37" args="(char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprPrintf           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>size</em>&nbsp;</td><td>Size of the memory block to allocate. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns a pointer to the allocated block. This routine will never return NULL if the block cannot be allocated. Rather the memory exhaustion handler specified by <b>mprSetMemHandler</b> will be called to allow global recovery. </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#81351f1fbe58c0fd7a976ec949d80f8d">mprFree</a>, <a class="el" href="mpr_8h.html#e79c5a301a9c0813dee2ee2e19eb041d">mprRealloc</a>, mprCalloc, mprSetMemHandler </dd></dl>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Compact printf. This will use less memory than the standard printf </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Linking without printf and all its derivatives will save memory for applications that demand minimal footprint. The MPR can be build without using any printf routines. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>Printf style format string </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the number of bytes written </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMprLogListener.html" title="Represent a listener for MPR log messages.">MprLogListener</a>, <a class="el" href="mpr_8h.html#a92642cc92f5ed91fe6e736f153387de">mprLog</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="9d3d268fb4b52dc6e9d2839db65b711d"></a><!-- doxytag: member="embedded.cpp::mprRemoveFromArray" ref="9d3d268fb4b52dc6e9d2839db65b711d" args="(MprArray *array, int index)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprRemoveFromArray           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structMprArray.html">MprArray</a> *&nbsp;</td>
          <td class="paramname"> <em>array</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>index</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Remove the nominated </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Removes the element specified by <em>index</em>, from the array. The array index is provided by mprAddToArray. </dd></dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the number of remaining elements in the array. Returns zero when the array is empty. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#1ad8f5fe0e22baa78449dfe9421c07af">mprAddToArray</a>, <a class="el" href="mpr_8h.html#9d054618c3410a8920e951a18e7fdd50">mprCreateArray</a>, <a class="el" href="mpr_8h.html#ec0b0707afaa239d594d0e6888a7cab9">mprDestroyArray</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="3882a1640da85be04eb147a539ede14b"></a><!-- doxytag: member="embedded.cpp::mprStaticPrintf" ref="3882a1640da85be04eb147a539ede14b" args="(char *fmt,...)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mprStaticPrintf           </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&nbsp;</td>
          <td class="paramname"> <em>...</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Print a message to the applications standard output without allocating memory. </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>Normal Printf routines may allocate dynamic memory when parsing the format string. mprStaticPrintf uses a static buffer and will never allocate dynamic memory. It is suitable for use by low-level handlers that must not error when doing output. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>fmt</em>&nbsp;</td><td>Printf style format string </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns the number of bytes written </dd></dl>
<dl class="remark" compact><dt><b>Remarks:</b></dt><dd>The maximum output is MPR_MAX_STRING - 1. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="mpr_8h.html#c2256fbc4a2a35c5ec94a9bd835c4c37">mprPrintf</a>, <a class="el" href="mpr_8h.html#a92642cc92f5ed91fe6e736f153387de">mprLog</a> </dd></dl>

</div>
</div><p>
</div>
	  </td>
      <td class="contentSep"></td>

      <td class="contentSideBar">
        <div class="linkSection">
          <h2>See Also</h2>

<!-- BeginDsi "dsi/api.html" -->
					<a href="../../../api/gen/appweb/overview.html">API Overview</a><br>
					<a href="../../../api/gen/appweb/c-api.html">C API</a><br>
					<a href="../../../api/gen/appweb/cplusplus-api.html">C++ API</a><br>
					<a href="../../../api/gen/appweb/javascript-api.html">JavaScript API</a><br>
					<a href="../../../api/gen/appweb/annotated.html">Class List</a><br>
					<a href="../../../api/gen/appweb/files.html">File List</a><br>
<!-- EndDsi -->

        </div>
      </td>
    </tr>
</table>

<!-- BeginDsi "dsi/terms.html" -->
<p class="terms"> 
	<a href="../../../product/copyright.html"
		>&copy; Embedthis Software LLC, 2003-2009. All 
		rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
</p>
<!-- EndDsi -->

</body>
</html>
