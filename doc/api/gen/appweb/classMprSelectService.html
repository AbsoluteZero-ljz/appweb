<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <title>Embedthis Appweb Public API</title>

<!-- BeginDsi "dsi/meta.html" -->
	<meta name="keywords" content="embedded web server, web server software, 
		embedded HTTP, application web server, embedded server,
		small web server, HTTP server, library web server, library HTTP,
		HTTP library" />
	<meta name="description" content="Embedthis Sofware provides 
		open source embedded web servers for devices and applications." />
	<meta name="robots" content="index,follow" />
	<meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/js.html" -->
	<script language="JavaScript" type="text/javascript">
		document._ROOT_="../../../";
	</script>
<!-- EndDsi -->

  

<!-- BeginDsi "dsi/style.html" -->
	<link rel="stylesheet" type="text/css" href="../../../css/doc.css">
<!-- EndDsi -->

</head>

<body leftmargin="0" topmargin="0" marginheight="0" marginwidth="0">
  

<!-- BeginDsi "dsi/navTop.html" -->
	<div class="background">
		<table border="0" cellpadding="0" cellspacing="0" width="100%">
			<tr>
				<td>
					<a name="top"></a>
					<img src="../../../images/backLeft.png" width="400" 
						height="93" border="0" ismap usemap="#home" /><br />
					<map name="home">
						<area coords="0,0,93,93" 
						href="http://www.mbedthis.com/index.html" />
					</map>
				</td>
				<td width="100%">
					<img src="../../../images/backMiddle.png" width="100%" 
						height="93" border="0" /><br />
				</td>
				<td>
					<img src="../../../images/backRight.png" width="354" 
						height="93" border="0" /><br />
				</td>
			</tr>
		</table>
	</div>

	<div class="navTop"> 
		<table cellpadding="0" cellspacing="0" border="0" align="top">
			<tr>
				<td valign="bottom"> 
					<a href="http://www.mbedthis.com/" class="navTop"
					>Embedthis Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../product/index.html" class="navTop"
					>Documentation Home</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../guide/appweb/users/admin/overview.html" class="navTop"
					>Administration</a> |&nbsp;
				</td>
				<td valign="bottom"> 
					<a href="../../../api/gen/appweb/overview.html" class="navTop"
					>Programmers Reference</a>
				</td>
				<td valign="bottom"> 
<!--
					<form class="smallText" action="../../../search.php" 
						method="post" name="searchForm" id="searchForm">
					</form>
					&nbsp; 
					<input class="smallText" type="text" name="search" 
						align="right" id="searchInput" size="15" maxlength="50"
						value="Sorry, No Searching" />
-->
				</td>
			</tr>
		</table>
	</div>

<!-- EndDsi -->

  <div class="navHistory">
    

<!-- BeginDsi "dsi/navHistory.html" -->
	<a href="../../../product/index.html">Documentation Home</a> &gt; 
<!-- EndDsi -->

     <a href="overview.html">Programmers Reference</a> &gt; <a href='annotated.html'>C++ API</a> &gt <b>MprSelectService</b>
  </div>

  <table class="content" border="0" height="100%" width="100%">
    <tr>
      <td class="content">
</div>
<div class="contents">
<h1>MprSelectService Class Reference</h1><!-- doxytag: class="MprSelectService" -->Manage system select() call and the set of I/O handles.  
<a href="#_details">More...</a>
<p>

<p>
<a href="classMprSelectService-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMprSelectService.html#313f28b3480652a21a4d2eae0c83844e">getFds</a> (fd_set *readInterest, fd_set *writeInterest, fd_set *exceptInterest, int *maxFd, int *lastGet)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMprSelectService.html#07d6878e855107501540b2c38ff17a4f">serviceIO</a> (int sockFd, int winMask)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMprSelectService.html#0cc91bf787028ae89a22d3bdaa63b0da">serviceIO</a> (int readyFds, fd_set *readFds, fd_set *writeFds, fd_set *exceptFds)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Manage system select() call and the set of I/O handles. <hr><h2>Member Function Documentation</h2>
<a class="anchor" name="313f28b3480652a21a4d2eae0c83844e"></a><!-- doxytag: member="MprSelectService::getFds" ref="313f28b3480652a21a4d2eae0c83844e" args="(fd_set *readInterest, fd_set *writeInterest, fd_set *exceptInterest, int *maxFd, int *lastGet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MprSelectService::getFds           </td>
          <td>(</td>
          <td class="paramtype">fd_set *&nbsp;</td>
          <td class="paramname"> <em>readInterest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&nbsp;</td>
          <td class="paramname"> <em>writeInterest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&nbsp;</td>
          <td class="paramname"> <em>exceptInterest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>maxFd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>lastGet</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Get the select file masks for all MPR file and sockets. </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>The getFds call set the select I/O masks for all files and sockets in use by the MPR. Application event loops should call getFds and then OR in their own file descriptors before calling select using the masks. getFds will only modify the masks if the I/O interests of underlying file descriptors have changed. This means that getFds may not modify the masks if nothing much has changed. It is imperative that you not clear the masks between calls to getFds. Consequently, you should copy or save the masks before using them in select -- as select will modify the masks. If you want to force getFds to rebuild the masks, zero the value pointed to by the lastGet parameter. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>readInterest</em>&nbsp;</td><td>fd_set read interest mask </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>writeInterest</em>&nbsp;</td><td>fd_set write interest mask </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptInterest</em>&nbsp;</td><td>Not used </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>maxFd</em>&nbsp;</td><td>Number of the highest file descriptor plus 1. This value is used by select. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>lastGet</em>&nbsp;</td><td>Pointer to a timestamp integer used by getFds to manage when getFds was last run. The value pointed to should be initialized to -1. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>Returns TRUE if the masks were modified. </dd></dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Embedthis Portable Runtime (MPR).">Mpr</a>, getIdleTime, runTasks, runTimers </dd></dl>

</div>
</div><p>
<a class="anchor" name="07d6878e855107501540b2c38ff17a4f"></a><!-- doxytag: member="MprSelectService::serviceIO" ref="07d6878e855107501540b2c38ff17a4f" args="(int sockFd, int winMask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MprSelectService::serviceIO           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sockFd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>winMask</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Service any pending I/O events for a given socket (Windows) </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>serviceIO service the I/O event specified in <em>winMask</em> for the given socket. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>sockFd</em>&nbsp;</td><td>Socket descriptor </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>winMask</em>&nbsp;</td><td>Windows Message I/O mask </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Embedthis Portable Runtime (MPR).">Mpr</a>, getIdleTime, runTasks, runTimers, <a class="el" href="classMprSelectService.html#313f28b3480652a21a4d2eae0c83844e">getFds</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="0cc91bf787028ae89a22d3bdaa63b0da"></a><!-- doxytag: member="MprSelectService::serviceIO" ref="0cc91bf787028ae89a22d3bdaa63b0da" args="(int readyFds, fd_set *readFds, fd_set *writeFds, fd_set *exceptFds)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MprSelectService::serviceIO           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>readyFds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&nbsp;</td>
          <td class="paramname"> <em>readFds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&nbsp;</td>
          <td class="paramname"> <em>writeFds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">fd_set *&nbsp;</td>
          <td class="paramname"> <em>exceptFds</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
<dl class="user" compact><dt><b><b>Synopsis</b>:</b></dt><dd>Service any pending I/O events </dd></dl>
<dl class="user" compact><dt><b><b>Overview</b>:</b></dt><dd>serviceIO will analyse the provided select masks and will call all registered select handlers if an I/O event has occurred for that handler. MprSocket automatically creates select handlers on Unix and so the socket handlers will be also invoked if an I/O event occurs. This routine call be called on Windows, but the native windows message mechanism will provide higher throughput. </dd></dl>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>readyFds</em>&nbsp;</td><td>Number of file descriptors with I/O events </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>readFds</em>&nbsp;</td><td>Read select mask </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>writeFds</em>&nbsp;</td><td>Write select mask </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exceptFds</em>&nbsp;</td><td>Exception select mask </td></tr>
  </table>
</dl>
<dl class="user" compact><dt><b><b>Stability</b> <b>classification</b>:</b></dt><dd>Evolving. </dd></dl>
<dl class="user" compact><dt><b><b>Library</b>:</b></dt><dd>libappweb </dd></dl>
<dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="classMpr.html" title="The Embedthis Portable Runtime (MPR).">Mpr</a>, getIdleTime, runTasks, runTimers, <a class="el" href="classMprSelectService.html#313f28b3480652a21a4d2eae0c83844e">getFds</a> </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>mpr/<a class="el" href="mpr_8h.html">mpr.h</a><li>mpr/<a class="el" href="mpr_8dox.html">mpr.dox</a><li>mpr/<a class="el" href="select_8cpp.html">select.cpp</a></ul>
</div>
	  </td>
      <td class="contentSep"></td>

      <td class="contentSideBar">
        <div class="linkSection">
          <h2>See Also</h2>

<!-- BeginDsi "dsi/api.html" -->
					<a href="../../../api/gen/appweb/overview.html">API Overview</a><br>
					<a href="../../../api/gen/appweb/c-api.html">C API</a><br>
					<a href="../../../api/gen/appweb/cplusplus-api.html">C++ API</a><br>
					<a href="../../../api/gen/appweb/javascript-api.html">JavaScript API</a><br>
					<a href="../../../api/gen/appweb/annotated.html">Class List</a><br>
					<a href="../../../api/gen/appweb/files.html">File List</a><br>
<!-- EndDsi -->

        </div>
      </td>
    </tr>
</table>

<!-- BeginDsi "dsi/terms.html" -->
<p class="terms"> 
	<a href="../../../product/copyright.html"
		>&copy; Embedthis Software LLC, 2003-2009. All 
		rights reserved. Embedthis is a trademark of Embedthis Software LLC.</a>
</p>
<!-- EndDsi -->

</body>
</html>
