<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>appweb: MaPacket</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">appweb&#160;<span id="projectnumber">1.0</span></div>
  </td>
  <td>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>MaPacket</h1>  </div>
</div>
<div class="contents">

<p>Data packet.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MaPacket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#ga5df1a8ee94fca1ff1aa9576abc429b85">maCreateDataPacket</a> (MprCtx ctx, int size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a data packet.  <a href="#ga5df1a8ee94fca1ff1aa9576abc429b85"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MaPacket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#gaf6e524d50d35ee9f7095e85a2c5f7b0c">maCreateEndPacket</a> (MprCtx ctx)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an end packet.  <a href="#gaf6e524d50d35ee9f7095e85a2c5f7b0c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MaPacket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#gac4d07f426450d99470479ce71db99803">maCreateHeaderPacket</a> (MprCtx ctx)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a response header packet.  <a href="#gac4d07f426450d99470479ce71db99803"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MaPacket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#gae7a1cc0bbf598580bd1ad8a166a9ba82">maCreatePacket</a> (MprCtx ctx, int size)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a data packet.  <a href="#gae7a1cc0bbf598580bd1ad8a166a9ba82"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#ga3fbb007c176ea20c68c675bd8dde4efd">maGetPacketLength</a> (MaPacket *packet)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the length of the packet data contents.  <a href="#ga3fbb007c176ea20c68c675bd8dde4efd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#gacfdb85fc6850462b81db3e1da730d2b6">maJoinPacket</a> (MaPacket *packet, MaPacket *other)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Join tow packets.  <a href="#gacfdb85fc6850462b81db3e1da730d2b6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">MaPacket *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___ma_packet.html#ga33ae09635d8a800aa600a207c8ec16fc">maSplitPacket</a> (MprCtx ctx, MaPacket *packet, int offset)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Split a data packet.  <a href="#ga33ae09635d8a800aa600a207c8ec16fc"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Data packet. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>The request/response pipeline sends data and control information in MaPacket objects. The output stream typically consists of a HEADER packet followed by zero or more data packets and terminated by an END packet. If the request has input data, the input stream is consists of one or more data packets followed by an END packet. <br/>
<br/>
 Packets contain data and optional prefix or suffix headers. Packets can be split, joined, filled or emptied. The pipeline stages will fill or transform packet data as required. </dd></dl>
<dl class="user"><dt><b><b>API</b> Stability:</b></dt><dd>Evolving</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="group___ma_packet.html" title="Data packet.">MaPacket</a> <a class="el" href="group___ma_queue.html" title="Queue Head.">MaQueue</a> <a class="el" href="group___ma_packet.html#ga5df1a8ee94fca1ff1aa9576abc429b85" title="Create a data packet.">maCreateDataPacket</a> <a class="el" href="group___ma_packet.html#gae7a1cc0bbf598580bd1ad8a166a9ba82" title="Create a data packet.">maCreatePacket</a> <a class="el" href="group___ma_packet.html#gaf6e524d50d35ee9f7095e85a2c5f7b0c" title="Create an end packet.">maCreateEndPacket</a> <a class="el" href="group___ma_packet.html#gacfdb85fc6850462b81db3e1da730d2b6" title="Join tow packets.">maJoinPacket</a> <a class="el" href="group___ma_packet.html#ga33ae09635d8a800aa600a207c8ec16fc" title="Split a data packet.">maSplitPacket</a> <a class="el" href="group___ma_packet.html#ga3fbb007c176ea20c68c675bd8dde4efd" title="Get the length of the packet data contents.">maGetPacketLength</a> <a class="el" href="group___ma_packet.html#gac4d07f426450d99470479ce71db99803" title="Create a response header packet.">maCreateHeaderPacket</a> </dd></dl>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga5df1a8ee94fca1ff1aa9576abc429b85"></a><!-- doxytag: member="appweb.h::maCreateDataPacket" ref="ga5df1a8ee94fca1ff1aa9576abc429b85" args="(MprCtx ctx, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaPacket* maCreateDataPacket </td>
          <td>(</td>
          <td class="paramtype">MprCtx&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a data packet. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Create a packet and set the MA_PACKET_DATA flag Data packets convey data through the response pipeline. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>A conn or request memory context object. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the package data storage. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>MaPacket object. </dd></dl>

</div>
</div>
<a class="anchor" id="gaf6e524d50d35ee9f7095e85a2c5f7b0c"></a><!-- doxytag: member="appweb.h::maCreateEndPacket" ref="gaf6e524d50d35ee9f7095e85a2c5f7b0c" args="(MprCtx ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaPacket* maCreateEndPacket </td>
          <td>(</td>
          <td class="paramtype">MprCtx&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create an end packet. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Create an end-of-stream packet and set the MA_PACKET_END flag. The end pack signifies the end of data. It is used on both incoming and outgoing streams through the request/response pipeline. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>A conn or request memory context object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>MaPacket object. </dd></dl>

</div>
</div>
<a class="anchor" id="gac4d07f426450d99470479ce71db99803"></a><!-- doxytag: member="appweb.h::maCreateHeaderPacket" ref="gac4d07f426450d99470479ce71db99803" args="(MprCtx ctx)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaPacket* maCreateHeaderPacket </td>
          <td>(</td>
          <td class="paramtype">MprCtx&#160;</td>
          <td class="paramname"><em>ctx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a response header packet. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Create a response header packet and set the MA_PACKET_HEADER flag. A header packet is used by the pipeline to hold the response headers. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>A conn or request memory context object. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>MaPacket object. </dd></dl>

</div>
</div>
<a class="anchor" id="gae7a1cc0bbf598580bd1ad8a166a9ba82"></a><!-- doxytag: member="appweb.h::maCreatePacket" ref="gae7a1cc0bbf598580bd1ad8a166a9ba82" args="(MprCtx ctx, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaPacket* maCreatePacket </td>
          <td>(</td>
          <td class="paramtype">MprCtx&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create a data packet. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Create a packet of the required size. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>A conn or request memory context object. </td></tr>
    <tr><td class="paramname">size</td><td>Size of the package data storage. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>MaPacket object. </dd></dl>

</div>
</div>
<a class="anchor" id="ga3fbb007c176ea20c68c675bd8dde4efd"></a><!-- doxytag: member="appweb.h::maGetPacketLength" ref="ga3fbb007c176ea20c68c675bd8dde4efd" args="(MaPacket *packet)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int maGetPacketLength </td>
          <td>(</td>
          <td class="paramtype">MaPacket *&#160;</td>
          <td class="paramname"><em>packet</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the length of the packet data contents. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Get the content length of a packet. This does not include the prefix or suffix data length -- just the pure data contents. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>Packet to examine. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Count of bytes contained by the packet. </dd></dl>

</div>
</div>
<a class="anchor" id="gacfdb85fc6850462b81db3e1da730d2b6"></a><!-- doxytag: member="appweb.h::maJoinPacket" ref="gacfdb85fc6850462b81db3e1da730d2b6" args="(MaPacket *packet, MaPacket *other)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int maJoinPacket </td>
          <td>(</td>
          <td class="paramtype">MaPacket *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MaPacket *&#160;</td>
          <td class="paramname"><em>other</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Join tow packets. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Join the contents of one packet to another by copying the data from the <em>other</em> packet into the first packet. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">packet</td><td>Destination packet </td></tr>
    <tr><td class="paramname">other</td><td>Other packet to copy data from. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Zero if successful, otherwise a negative Mpr error code </dd></dl>

</div>
</div>
<a class="anchor" id="ga33ae09635d8a800aa600a207c8ec16fc"></a><!-- doxytag: member="appweb.h::maSplitPacket" ref="ga33ae09635d8a800aa600a207c8ec16fc" args="(MprCtx ctx, MaPacket *packet, int offset)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">MaPacket* maSplitPacket </td>
          <td>(</td>
          <td class="paramtype">MprCtx&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">MaPacket *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Split a data packet. </p>
<dl class="user"><dt><b><b>Description</b>:</b></dt><dd>Split a data packet at the specified offset. Packets may need to be split so that downstream stages can digest their contents. If a packet is too large for the queue maximum size, it should be split. When the packet is split, a new packet is created containing the data after the offset. Any suffix headers are moved to the new packet. </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>A conn or request memory context object to own the packet. </td></tr>
    <tr><td class="paramname">packet</td><td>Packet to split </td></tr>
    <tr><td class="paramname">offset</td><td>Location in the original packet at which to split </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>New MaPacket object containing the data after the offset. No need to free, unless you have a very long running request. Otherwise the packet memory will be released automatically when the request completes. </dd></dl>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Wed Nov 14 2012 20:45:00 for appweb by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
